<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corazón para Shinae</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Arial', sans-serif;
        }
        
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .text-container {
            position: absolute;
            z-index: 2;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1.5s ease-out;
        }
        
        .message {
            font-size: 3.2rem; /* Reducido de 4rem a 3.2rem */
            font-weight: bold;
            color: #ff3366;
            text-shadow: 0 0 10px #ff0066, 0 0 20px #ff0066, 0 0 30px #ff0066;
            white-space: nowrap;
            display: inline-block;
        }
        
        .heart-beat {
            animation: heartbeat 1.5s infinite;
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            25% { transform: scale(1.05); }
            50% { transform: scale(1); }
            75% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        .heart-particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
        }
        
        .explosion {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transform: scale(0);
            color: #ff0066;
            font-size: 1.5rem;
            white-space: nowrap;
            transition: all 0.5s ease;
        }
    </style>
</head>
<body>
    <canvas id="heartCanvas"></canvas>
    
    <div class="text-container" id="textContainer">
        <span class="message" id="loveMessage">TE AMO SHINAE</span> <!-- Texto cambiado -->
    </div>

    <script>
        // Configuración del canvas y partículas
        const canvas = document.getElementById('heartCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        const particles = [];
        const particleCount = 800;
        const textContainer = document.getElementById('textContainer');
        const loveMessage = document.getElementById('loveMessage');
        let heartFormed = false;
        let beatPhase = 0;
        let beatScale = 1;
        
        // Clase de partícula
        class Particle {
            constructor() {
                this.reset();
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 3 + 1;
            }
            
            reset() {
                this.startX = Math.random() * canvas.width;
                this.startY = Math.random() * canvas.height;
                this.x = this.startX;
                this.y = this.startY;
                this.size = Math.random() * 3 + 1;
                this.baseSize = this.size;
                this.color = `hsl(${Math.random() * 20 + 340}, 100%, ${Math.random() * 20 + 60}%)`;
                this.speed = Math.random() * 2 + 0.5;
                this.angle = Math.random() * Math.PI * 2;
                this.va = Math.random() * 0.05 + 0.01;
                this.targetX = 0;
                this.targetY = 0;
                this.arrived = false;
                this.orbitRadius = Math.random() * 10 + 5;
                this.orbitSpeed = Math.random() * 0.02 + 0.01;
                this.orbitAngle = Math.random() * Math.PI * 2;
            }
            
            update() {
                if (!heartFormed) {
                    // Movimiento hacia la posición del corazón
                    const dx = this.targetX - this.x;
                    const dy = this.targetY - this.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < 2) {
                        this.arrived = true;
                        this.x = this.targetX;
                        this.y = this.targetY;
                    } else {
                        this.x += dx * 0.03;
                        this.y += dy * 0.03;
                    }
                } else {
                    // Movimiento orbital después de formar el corazón
                    this.orbitAngle += this.orbitSpeed;
                    
                    // Efecto de latido
                    const beatEffect = Math.sin(beatPhase) * 0.1 * beatScale;
                    this.size = this.baseSize * (1 + beatEffect);
                    
                    // Movimiento circular alrededor de la posición objetivo
                    this.x = this.targetX + Math.cos(this.orbitAngle) * this.orbitRadius * beatScale;
                    this.y = this.targetY + Math.sin(this.orbitAngle) * this.orbitRadius * beatScale;
                }
            }
            
            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        // Crear partículas
        for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle());
        }
        
        // Función para calcular posición de corazón
        function getHeartPosition(particle, index, total) {
            const t = (index / total) * Math.PI * 2;
            const scale = 12;
            const x = 16 * Math.pow(Math.sin(t), 3);
            const y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
            
            particle.targetX = canvas.width / 2 + x * scale;
            particle.targetY = canvas.height / 2 + y * scale;
        }
        
        // Asignar posiciones de corazón
        particles.forEach((p, i) => getHeartPosition(p, i, particleCount));
        
        // Animación
        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Actualizar fase de latido
            beatPhase += 0.1;
            
            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Función para crear explosión de corazones
        function createHeartExplosion(element) {
            const letters = element.textContent.split('');
            element.innerHTML = '';
            
            letters.forEach((letter, index) => {
                const letterSpan = document.createElement('span');
                letterSpan.textContent = letter;
                letterSpan.style.display = 'inline-block';
                letterSpan.style.transition = 'all 0.5s ease';
                element.appendChild(letterSpan);
                
                // Animación para cada letra
                setTimeout(() => {
                    letterSpan.style.transform = 'translateY(-20px) scale(1.5)';
                    letterSpan.style.color = '#ff0066';
                    
                    // Crear mini corazones
                    for (let i = 0; i < 3; i++) {
                        const heart = document.createElement('div');
                        heart.innerHTML = '❤️';
                        heart.style.position = 'absolute';
                        heart.style.left = `${index * 30 + 15}px`;
                        heart.style.top = '0';
                        heart.style.fontSize = '1rem';
                        heart.style.opacity = '0';
                        heart.style.transform = 'scale(0)';
                        heart.style.transition = `all 1s ease ${i * 0.2}s`;
                        element.appendChild(heart);
                        
                        setTimeout(() => {
                            heart.style.opacity = '1';
                            heart.style.transform = `translate(
                                ${(Math.random() - 0.5) * 50}px,
                                ${-Math.random() * 100 - 50}px
                            ) scale(${Math.random() * 0.5 + 0.5})`;
                        }, 10);
                    }
                    
                    setTimeout(() => {
                        letterSpan.style.opacity = '0';
                        letterSpan.style.transform = 'translateY(-50px) scale(0)';
                    }, 1000);
                }, index * 200);
            });
        }
        
        // Comprobar si todas las partículas han llegado
        function checkHeartFormed() {
            const allArrived = particles.every(p => p.arrived);
            if (allArrived && !heartFormed) {
                heartFormed = true;
                
                // Mostrar texto
                textContainer.style.opacity = '1';
                textContainer.style.transform = 'translateY(0)';
                loveMessage.classList.add('heart-beat');
                
                // Animación de latido del corazón
                setInterval(() => {
                    beatScale = 1.1;
                    setTimeout(() => { beatScale = 1; }, 200);
                }, 1000);
                
                // Posicionar texto sobre el corazón
                positionText();
                
                // Después de 3 segundos, animar el texto
                setTimeout(() => {
                    createHeartExplosion(loveMessage);
                }, 3000);
            }
            
            if (!heartFormed) {
                setTimeout(checkHeartFormed, 100);
            }
        }
        
        // Posicionar texto en el centro sobre el corazón
        function positionText() {
            const heartHeight = 24 * 12; // altura aproximada del corazón
            textContainer.style.left = `${(canvas.width - textContainer.offsetWidth) / 2}px`;
            textContainer.style.top = `${(canvas.height - heartHeight) / 2 - 80}px`;
        }
        
        // Iniciar verificación
        setTimeout(checkHeartFormed, 1000);
        
        // Redimensionar canvas
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // Recalcular posiciones del corazón
            particles.forEach((p, i) => getHeartPosition(p, i, particleCount));
            
            if (heartFormed) {
                positionText();
            }
        });
    </script>
</body>
</html>